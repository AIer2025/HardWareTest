<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®åº“ERå›¾ - å®éªŒå®¤ç¡¬ä»¶æµ‹è¯•å¹³å°</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .diagram-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            font-size: 1.8em;
        }
        
        .mermaid {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            overflow-x: auto;
        }
        
        .info-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .info-box h3 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
        }
        
        .info-item h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .info-item ul {
            list-style: none;
            padding-left: 0;
        }
        
        .info-item li {
            margin: 5px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .info-item li::before {
            content: 'â–¸';
            position: absolute;
            left: 0;
        }
        
        .table-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .table-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .table-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .table-card p {
            font-size: 0.9em;
            color: #666;
            line-height: 1.5;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-symbol {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: 5px;
            background: #667eea;
            color: white;
        }
        
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .note strong {
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—„ï¸ æ•°æ®åº“ERå›¾ - å®éªŒå®¤ç¡¬ä»¶æµ‹è¯•å¹³å°</h1>
        
        <div class="diagram-section">
            <h2>æ•°æ®åº“å®ä½“å…³ç³»å›¾ (Entity-Relationship Diagram)</h2>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-symbol">PK</div>
                    <span>Primary Key (ä¸»é”®)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-symbol">FK</div>
                    <span>Foreign Key (å¤–é”®)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-symbol">UK</div>
                    <span>Unique Key (å”¯ä¸€é”®)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-symbol">||--o{</div>
                    <span>ä¸€å¯¹å¤šå…³ç³»</span>
                </div>
            </div>
            
            <div class="note">
                <strong>ğŸ’¡ æç¤º:</strong> è¯¥ERå›¾å±•ç¤ºäº†ç³»ç»Ÿçš„å®Œæ•´æ•°æ®åº“ç»“æ„,åŒ…æ‹¬8å¼ æ ¸å¿ƒè¡¨å’Œ4ä¸ªè§†å›¾ã€‚ä½¿ç”¨é¼ æ ‡æ»šè½®å¯ä»¥ç¼©æ”¾å›¾è¡¨ã€‚
            </div>
            
            <div class="mermaid">
erDiagram
    TB_SYSTEM ||--o{ TB_PLATFORM : "åŒ…å«"
    TB_PLATFORM ||--o{ TB_MODULE : "åŒ…å«"
    TB_MODULE ||--o{ TB_TEST_DATA : "äº§ç”Ÿ"
    TB_MODULE ||--o{ TB_WEIBULL_ANALYSIS : "åˆ†æ"
    TB_IMPORT_BATCH ||--o{ TB_TEST_DATA : "åŒ…å«"

    TB_SYSTEM {
        int system_id PK
        varchar system_code UK
        varchar system_name
        text description
        varchar location
        date install_date
        date warranty_date
        datetime create_time
        datetime update_time
        tinyint is_active
        varchar created_by
        varchar updated_by
    }

    TB_PLATFORM {
        int platform_id PK
        int system_id FK
        varchar platform_code UK
        varchar platform_name
        varchar platform_type
        varchar serial_number
        text description
        date install_date
        datetime create_time
        datetime update_time
        tinyint is_active
        varchar created_by
        varchar updated_by
    }

    TB_MODULE {
        int module_id PK
        int platform_id FK
        varchar module_code UK
        varchar module_name
        varchar module_type
        varchar manufacturer
        varchar model_number
        varchar serial_number
        date manufacture_date
        int rated_life
        text description
        datetime create_time
        datetime update_time
        tinyint is_active
        varchar created_by
        varchar updated_by
    }

    TB_TEST_DATA {
        bigint test_id PK
        int module_id FK
        int batch_id FK
        datetime test_time
        decimal test_value
        varchar test_unit
        varchar test_type
        int test_cycle
        decimal failure_time
        varchar failure_mode
        tinyint is_censored
        decimal temperature
        decimal humidity
        varchar operator
        text remarks
        datetime create_time
    }

    TB_WEIBULL_ANALYSIS {
        int analysis_id PK
        int module_id FK
        datetime analysis_time
        int data_count
        decimal beta
        decimal eta
        decimal gamma
        decimal mttf
        decimal median_life
        decimal b10_life
        decimal b50_life
        decimal b90_life
        decimal r_squared
        decimal confidence_level
        decimal lower_beta
        decimal upper_beta
        decimal lower_eta
        decimal upper_eta
        varchar analysis_method
        text analysis_notes
        varchar analyst
        datetime create_time
    }

    TB_IMPORT_BATCH {
        int batch_id PK
        varchar batch_code UK
        varchar import_type
        varchar file_name
        varchar file_path
        int record_count
        int success_count
        int fail_count
        varchar operator
        text error_message
        datetime import_time
    }

    TB_DATA_DICTIONARY {
        int dict_id PK
        varchar dict_type
        varchar dict_code UK
        varchar dict_value
        varchar dict_label
        int sort_order
        tinyint is_default
        varchar remarks
        tinyint is_active
        datetime create_time
        datetime update_time
    }

    TB_SYSTEM_LOG {
        bigint log_id PK
        varchar log_type
        varchar log_level
        varchar module_name
        varchar action
        varchar operator
        text message
        text stack_trace
        datetime create_time
    }
            </div>
        </div>
        
        <div class="diagram-section">
            <h2>ğŸ“Š æ ¸å¿ƒè¡¨è¯´æ˜</h2>
            
            <div class="table-list">
                <div class="table-card">
                    <h4>ğŸ¢ TB_SYSTEM (ç³»ç»Ÿè¡¨)</h4>
                    <p>ç®¡ç†é¡¶å±‚æµ‹è¯•ç³»ç»Ÿ,å¦‚"æ·±åœ³å…¬å¸æµ‹è¯•ä¸­å¿ƒ"ã€"åŒ—äº¬ç ”å‘ä¸­å¿ƒ"ç­‰ã€‚è®°å½•ç³»ç»Ÿçš„åŸºæœ¬ä¿¡æ¯ã€ä½ç½®å’Œå®‰è£…ç»´ä¿ä¿¡æ¯ã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>ğŸ–¥ï¸ TB_PLATFORM (å¹³å°è¡¨)</h4>
                    <p>ç®¡ç†æµ‹è¯•å¹³å°,æ¯ä¸ªå¹³å°å½’å±äºä¸€ä¸ªç³»ç»Ÿã€‚åŒ…æ‹¬"è¡€æ¶²ä¸­å¿ƒå¹³å°"ã€"ç›æ¹–æ‰€å¹³å°"ç­‰ã€‚è®°å½•å¹³å°ç±»å‹å’Œé…ç½®ä¿¡æ¯ã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>ğŸ”§ TB_MODULE (æ¨¡ç»„è¡¨)</h4>
                    <p>ç®¡ç†å…·ä½“çš„ç¡¬ä»¶æ¨¡ç»„,æ¯ä¸ªæ¨¡ç»„å½’å±äºä¸€ä¸ªå¹³å°ã€‚åŒ…æ‹¬ç”µæºæ¨¡ç»„ã€ä¼ æ„Ÿå™¨æ¨¡ç»„ç­‰ã€‚è®°å½•åˆ¶é€ å•†ã€å‹å·ã€åºåˆ—å·ç­‰è¯¦ç»†ä¿¡æ¯ã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>ğŸ“Š TB_TEST_DATA (æµ‹è¯•æ•°æ®è¡¨)</h4>
                    <p>å­˜å‚¨æ‰€æœ‰æµ‹è¯•æ•°æ®,åŒ…æ‹¬æµ‹è¯•æ—¶é—´ã€æµ‹è¯•å€¼ã€å¤±æ•ˆæ—¶é—´ã€æ˜¯å¦æˆªå°¾ç­‰ä¿¡æ¯ã€‚è¿™æ˜¯å¨å¸ƒå°”åˆ†æçš„æ•°æ®æºã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>ğŸ“ˆ TB_WEIBULL_ANALYSIS (å¨å¸ƒå°”åˆ†æç»“æœè¡¨)</h4>
                    <p>ä¿å­˜å¨å¸ƒå°”åˆ†æç»“æœ,åŒ…æ‹¬Î²ã€Î·å‚æ•°ã€MTTFã€B10/B50/B90å¯¿å‘½ã€RÂ²æ‹Ÿåˆä¼˜åº¦ç­‰ã€‚æ”¯æŒå†å²ç‰ˆæœ¬æŸ¥è¯¢ã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>ğŸ“¦ TB_IMPORT_BATCH (å¯¼å…¥æ‰¹æ¬¡è¡¨)</h4>
                    <p>è®°å½•æ¯æ¬¡æ•°æ®å¯¼å…¥çš„æ‰¹æ¬¡ä¿¡æ¯,åŒ…æ‹¬å¯¼å…¥æ–¹å¼ã€æ–‡ä»¶ä¿¡æ¯ã€æˆåŠŸå¤±è´¥ç»Ÿè®¡ç­‰ã€‚æ”¯æŒæ•°æ®æº¯æºã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>ğŸ“š TB_DATA_DICTIONARY (æ•°æ®å­—å…¸è¡¨)</h4>
                    <p>ç³»ç»Ÿé…ç½®æ•°æ®,åŒ…æ‹¬æ¨¡ç»„ç±»å‹ã€æµ‹è¯•ç±»å‹ã€å¤±æ•ˆæ¨¡å¼ã€å¹³å°ç±»å‹ã€åˆ†ææ–¹æ³•ç­‰æšä¸¾å€¼ã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>ğŸ“ TB_SYSTEM_LOG (ç³»ç»Ÿæ—¥å¿—è¡¨)</h4>
                    <p>è®°å½•æ‰€æœ‰é‡è¦æ“ä½œå’Œç³»ç»Ÿäº‹ä»¶,åŒ…æ‹¬ç™»å½•ã€å¯¼å…¥ã€åˆ†æã€å¯¼å‡ºç­‰æ“ä½œã€‚æ”¯æŒå®¡è®¡å’Œé—®é¢˜è¿½æº¯ã€‚</p>
                </div>
            </div>
        </div>
        
        <div class="diagram-section">
            <h2>ğŸ‘ï¸ æ•°æ®è§†å›¾</h2>
            
            <div class="table-list">
                <div class="table-card">
                    <h4>V_SYSTEM_HIERARCHY</h4>
                    <p>ç³»ç»Ÿå±‚çº§è§†å›¾:å±•ç¤ºç³»ç»Ÿâ†’å¹³å°â†’æ¨¡ç»„çš„å®Œæ•´å±‚çº§ç»“æ„,æ–¹ä¾¿æŸ¥è¯¢å’Œç®¡ç†ã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>V_TEST_DATA_SUMMARY</h4>
                    <p>æµ‹è¯•æ•°æ®æ±‡æ€»è§†å›¾:æŒ‰æ¨¡ç»„ç»Ÿè®¡æµ‹è¯•æ•°æ®,åŒ…æ‹¬æ€»æ•°ã€å¹³å‡å€¼ã€å¤±æ•ˆæ—¶é—´ç­‰ç»Ÿè®¡ä¿¡æ¯ã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>V_WEIBULL_ANALYSIS_DATA</h4>
                    <p>å¨å¸ƒå°”åˆ†ææ•°æ®è§†å›¾:æ•´åˆæ¨¡ç»„å’Œæµ‹è¯•æ•°æ®,ä¸ºå¨å¸ƒå°”åˆ†ææä¾›æ ‡å‡†åŒ–çš„æ•°æ®æºã€‚</p>
                </div>
                
                <div class="table-card">
                    <h4>V_WEIBULL_LATEST</h4>
                    <p>æœ€æ–°å¨å¸ƒå°”åˆ†æç»“æœè§†å›¾:æŸ¥è¯¢æ¯ä¸ªæ¨¡ç»„çš„æœ€æ–°åˆ†æç»“æœ,åŒ…å«å®Œæ•´çš„å¯é æ€§æŒ‡æ ‡ã€‚</p>
                </div>
            </div>
        </div>
        
        <div class="info-box">
            <h3>ğŸ”— å…³ç³»è¯´æ˜</h3>
            <div class="info-grid">
                <div class="info-item">
                    <h4>ç³»ç»Ÿå±‚çº§å…³ç³»</h4>
                    <ul>
                        <li>System (1) â†’ Platform (N)</li>
                        <li>Platform (1) â†’ Module (N)</li>
                        <li>ä¸‰çº§æ ‘å½¢ç»“æ„è®¾è®¡</li>
                        <li>æ”¯æŒçµæ´»çš„ç»„ç»‡ç®¡ç†</li>
                    </ul>
                </div>
                
                <div class="info-item">
                    <h4>æµ‹è¯•æ•°æ®å…³ç³»</h4>
                    <ul>
                        <li>Module (1) â†’ TestData (N)</li>
                        <li>ImportBatch (1) â†’ TestData (N)</li>
                        <li>æ”¯æŒæ‰¹æ¬¡è¿½æº¯</li>
                        <li>æ•°æ®æ¥æºå¯æŸ¥</li>
                    </ul>
                </div>
                
                <div class="info-item">
                    <h4>åˆ†æç»“æœå…³ç³»</h4>
                    <ul>
                        <li>Module (1) â†’ WeibullAnalysis (N)</li>
                        <li>ä¿ç•™å†å²åˆ†æè®°å½•</li>
                        <li>æ”¯æŒç‰ˆæœ¬å¯¹æ¯”</li>
                        <li>æ—¶é—´åºåˆ—åˆ†æ</li>
                    </ul>
                </div>
                
                <div class="info-item">
                    <h4>æ•°æ®çº¦æŸ</h4>
                    <ul>
                        <li>å¤–é”®çº§è”æ›´æ–°</li>
                        <li>åˆ é™¤ä¿æŠ¤(RESTRICT)</li>
                        <li>å”¯ä¸€æ€§çº¦æŸ</li>
                        <li>æ£€æŸ¥çº¦æŸ(Î²>0, Î·>0)</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="info-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
            <h3>ğŸ’¾ æ•°æ®åº“æŠ€æœ¯è§„æ ¼</h3>
            <div class="info-grid">
                <div class="info-item">
                    <h4>åŸºç¡€é…ç½®</h4>
                    <ul>
                        <li>æ•°æ®åº“: MySQL 8.0+</li>
                        <li>å­˜å‚¨å¼•æ“: InnoDB</li>
                        <li>å­—ç¬¦é›†: utf8mb4</li>
                        <li>æ’åºè§„åˆ™: utf8mb4_unicode_ci</li>
                    </ul>
                </div>
                
                <div class="info-item">
                    <h4>è¡¨ç»Ÿè®¡</h4>
                    <ul>
                        <li>æ ¸å¿ƒè¡¨: 8å¼ </li>
                        <li>æ•°æ®è§†å›¾: 4ä¸ª</li>
                        <li>ç´¢å¼•: ä¸»é”®+å¤–é”®+æŸ¥è¯¢ç´¢å¼•</li>
                        <li>çº¦æŸ: å¤–é”®+å”¯ä¸€+æ£€æŸ¥</li>
                    </ul>
                </div>
                
                <div class="info-item">
                    <h4>äº‹åŠ¡æ”¯æŒ</h4>
                    <ul>
                        <li>ACIDå®Œæ•´æ€§</li>
                        <li>è¡Œçº§é”å®š</li>
                        <li>å´©æºƒæ¢å¤</li>
                        <li>å¤–é”®çº¦æŸ</li>
                    </ul>
                </div>
                
                <div class="info-item">
                    <h4>æ€§èƒ½ä¼˜åŒ–</h4>
                    <ul>
                        <li>å¤åˆç´¢å¼•ä¼˜åŒ–</li>
                        <li>è§†å›¾é¢„è®¡ç®—</li>
                        <li>æŸ¥è¯¢ç¼“å­˜</li>
                        <li>è¿æ¥æ± ç®¡ç†</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 30px; text-align: center; color: white; font-size: 0.9em;">
            <p>Mathematica Lab Test Platform - Version 3.3</p>
            <p>Database Schema: syshardtestdb</p>
            <p>Â© 2025 Weibull Reliability Analysis System</p>
        </div>
    </div>
    
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            er: {
                layoutDirection: 'TB',
                minEntityWidth: 200,
                minEntityHeight: 80,
                entityPadding: 15,
                stroke: '#667eea',
                fill: '#f8f9fa',
                fontSize: 12
            }
        });
    </script>
</body>
</html>
